{% extends 'base.html' %}
{% block title %}{{ event.title }}{% endblock %}
{% block content %}
<h2>{{ event.title }}</h2>
<p><strong>Date:</strong> {{ event.date.strftime('%Y-%m-%d %H:%M') }}</p>
<p><strong>Location:</strong> {{ event.location }}</p>
<p><strong>Organized by:</strong> {{ event.club.name }}</p>
<p>{{ event.description }}</p>

{% if current_user.is_authenticated %}
{% if is_registered %}
{% if status == 'confirmed' %}
<p>You are registered for this event.</p>
<a href="{{ url_for('event.cancel_registration', event_id=event.id) }}">Cancel Registration</a>
{% elif status == 'waiting' %}
<p>You are on the waiting list for this event.</p>
<a href="{{ url_for('event.cancel_registration', event_id=event.id) }}">Cancel Registration</a>
{% endif %}
{% else %}
<a href="{{ url_for('event.register_event', event_id=event.id) }}">Register for Event</a>
{% endif %}
{% else %}
<p><a href="{{ url_for('auth.login') }}">Login</a> to register for this event.</p>
{% endif %}

{% if current_user.is_authenticated and event.club.president_id == current_user.id %}
<a href="{{ url_for('event.manage_event_attendees', event_id=event.id) }}">Manage Attendees</a>
{% endif %}

{% endblock %}